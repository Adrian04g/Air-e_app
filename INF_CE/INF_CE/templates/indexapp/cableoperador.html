<!-- Versión mejorada del template con cards para móviles -->
{% extends 'base.html' %}
{% load static %}

<!--Titulo de la pestaña-->
{% block Title_head %}
<title>Air-e | PRST</title>
<link rel="stylesheet" href="{% static 'ProyectosList.css' %}">
{% endblock %}

<!--Este es el titulo de la cabecera-->
{% block title %}
<span class="h2 align-middle ms-3 admin">Hoja de vida PRST</span>
{% endblock %}

<!--Este es el contenido de esta sesion llamada administrador-->
{% block content %}
<div class="row g-3 d-none d-md-block">
    <!-- Vista de tabla para desktop -->
    <button type="submit" class="btn btn-primary border border-light border border-4">
        <a class="text-white text-decoration-none" href="{% url 'indexapp:lista_cableoperadores' %}">Volver a lista de cable operadores</a>
    </button>
    <div class="card">
        <div class="mb-3 shadow-sm">
           <div class="card-header bg-primary text-white">
                <center><h3>{{ object.nombre_largo|default:object.nombre }} {% if object.nombre_largo == NONE %}(Por favor registrar nombre largo){% endif %}</h3></center>
            </div>
            <div class="card-body">
                <div class="row g-2">
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">NIT:</small><br>
                        <span class="fw-semibold">{{ object.NIT|default:"N/A" }}{% if object.Digito_verificacion %}-{{ object.Digito_verificacion|default:"" }}{% endif %}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Nombre:</small><br>
                        <span class="fw-semibold">{{ object.nombre|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Registro TIC:</small><br>
                        <span class="fw-semibold">{{ object.RegistroTic|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Codigo Interno:</small><br>
                        <span class="fw-semibold">{{ object.CodigoInterno|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Pais:</small><br>
                        <span class="fw-semibold">{{ object.pais|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Ciudad:</small><br>
                        <span class="fw-semibold">{{ object.ciudad|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Dirección:</small><br>
                        <span class="fw-semibold">{{ object.direccion|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Representante:</small><br>
                        <span class="fw-semibold">{{ object.Representante|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Teléfono:</small><br>
                        <span class="fw-semibold">{{ object.telefono|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Correo:</small><br>
                        <span class="fw-semibold">{{ object.correo|default:"N/A" }}</span>
                    </div>
                    <div class="col-12">
                        <small class="text-muted" style="font-weight: 700;">Estado:</small><br>
                        <span class="fw-semibold">{{ object.estado }} </span>
                    </div><br>
                    <div class="col-2">
                        <small class="text-muted" style="font-weight: 700;">Ejecutiva:</small><br>
                        <span class="fw-semibold">{{ object.ejecutiva.first_name }} {{ object.ejecutiva.last_name }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

   <button type="submit" class="btn btn-primary border border-light border border-4">
    <a class="text-white text-decoration-none" href="{% url 'indexapp:editar_cableoperador' pk=object.pk %}">Editar cable operador</a>
</button> 
{% if contrato %}
   <button type="submit" class="btn btn-primary border border-light border border-4">
       <a href="{% url 'contratos:detalle_contrato' pk=contrato.pk %}" 
          class="text-white text-decoration-none">
             Ver Contrato
       </a>
</button> 
<button type="submit" class="btn btn-primary border border-light border border-4">
    <a href="{% url 'contratos:crear_contrato_vinculado' pk=object.pk %}" 
    class="text-white text-decoration-none">
      Crear Nuevo Contrato
    </a>
</button> 
{% else %}
<button type="submit" class="btn btn-primary border border-light border border-4">
    <a href="{% url 'contratos:crear_contrato_vinculado' pk=object.pk %}" 
    class="text-white text-decoration-none">
      Registrar primer Contrato
    </a>
</button> 
{% endif %}
    <center><h1 class="border border-light border-4 bg-secondary bg-gradient-subtle text-emphasis-dark text-center"><span class="h1 align-middle ms-3 admin">Facturas de {{ object.nombre }}</span></h1></center>
    <!-- facturas del cable operador -->
    {% for factura in facturas %}
    <div class="card">
        <div class="mb-3 shadow-sm">
           <div class="card-header bg-primary text-white">
                <center><h3>Numero de factura: {{ factura.Num_fact }}</h3></center>
            </div> 
            <div class="card-body">
                <div class="row g-2">
                    <div class="col-2">
                        <span class="fw-semibold">Responsable:</span><br>
                        <small class="text-muted">{{ factura.Responsable }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Clasificacion:</span><br>
                        <small class="text-muted">{{ factura.Clasificacion }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Mes uso:</span><br>
                        <small class="text-muted">{{ factura.Mes_uso|date:"M-d" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de la factura:</span><br>
                        <small class="text-muted">{{ factura.Fecha_fact|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Valor(IVA incluido):</span><br>
                        <small class="text-muted">{{ factura.Valor_iva }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Valor en millones:</span><br>
                        <small class="text-muted">{{ factura.Valor_iva_millones }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de vencimiento:</span><br>
                        <small class="text-muted">{{ factura.Fecha_venc|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Periodo de vencimiento:</span><br>
                        <small class="text-muted">{{ factura.Periodo_venc|date:"M-d" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Factura aceptada:</span><br>
                        <small class="text-muted">{{ factura.Factura_aceptada }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Factura vencida:</span><br>
                        <small class="text-muted">{{ factura.Factura_vencida }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Factura CRC:</span><br>
                        <small class="text-muted">{{ factura.Factura_CRC }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Valor pagado:</span><br>
                        <small class="text-muted">{{ factura.Valor_pagado }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de pago:</span><br>
                        <small class="text-muted">{{ factura.Fecha_pago|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Periodo de pago:</span><br>
                        <small class="text-muted">{{ factura.Periodo_pago|date:"M-d" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de aplicación:</span><br>
                        <small class="text-muted">{{ factura.Fecha_aplicacion|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de confirmación:</span><br>
                        <small class="text-muted">{{ factura.Fecha_confirmacion|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Valor de la deuda:</span><br>
                        <small class="text-muted">{{ factura.Valor_deuda }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Pagado:</span><br>
                        <small class="text-muted">{{ factura.Pagado }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Intereses IVA:</span><br>
                        <small class="text-muted">{{ factura.Interes_iva }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Indicador de recaudo:</span><br>
                        <small class="text-muted">{{ factura.Indicador_recaudo|date:"d/m/Y" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Acuerdo de pago:</span><br>
                        <small class="text-muted">{{ factura.Acuerdo_pago }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de acuerdo de pago:</span><br>
                        <small class="text-muted">{{ factura.Fecha_acuerdo_pago|date:"M-d"|default:"N/A" }}</small>
                    </div>
                    <div class="col-2">
                        <span class="fw-semibold">Fecha de pago de acuerdo de pago:</span><br>
                        <small class="text-muted">{{ factura.Fecha_pago_AP|date:"M-d"|default:"N/A" }}</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
<!--Fin de vista pantalla grande-->
<!-- Vista de cards para móviles -->
    <div class="d-block d-md-none">
        <div class="card mb-3 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0">
                    <strong>{{ object.nombre }}</strong>
                </h6>
            </div>
            <div class="card-body">
                <div class="row g-2">
                    <div class="col-6">
                        <small class="text-muted">Representante:</small><br>
                        <span class="fw-semibold">{{ object.Representante }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">NIT:</small><br>
                        <span class="fw-semibold">{{ object.NIT }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Registro Tic:</small><br>
                        <span>{{ object.RegistroTic }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Codigo interno:</small><br>
                        <span>{{ object.CodigoInterno }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Pais:</small><br>
                        <span>{{ object.pais }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Ciudad/Municipio:</small><br>
                        <span>{{ object.ciudad }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Dirección:</small><br>
                        <span>{{ object.direccion }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Nombre largo:</small><br>
                        <span>{{ object.nombre_largo }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Teléfono:</small><br>
                        <span>{{ object.telefono }}</span>
                    </div>
                    <div class="col-6">
                        <small class="text-muted">Correo:</small><br>
                        <span>{{ object.correo }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}